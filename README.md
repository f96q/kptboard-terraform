# KPTBoard Terraform

```
+--------------------------------------------------------+ 
| VPC (kptboard)                                         |
|--------------------------------------------------------|
|                                                        |
|  +--------------------+                                |
|  | ALB                |                                |
|  |--------------------|                                |
|  | TargetGrops        |                                |
|  | * kptboard         |--------------------------------+------------+
|  +--------------------+                                |            |
|           |                                            |            |
|           |                                            |            |
|           |                                            |            |
|  +--------------------+     +--------------------+     |            |
|  | EC2                |     | RDS                |     |            |
|  |--------------------|     |--------------------|     |            |
|  | Docker             |-----| MySQL              |     |            |
|  | * kptboard (Rails) |     | * kptboard         |     |            |
|  +--------------------+     +--------------------+     |            |
|  |   |     |   |                                       |            |
+--+---+-----+---+---------------------------------------+            |
   |   |     |   |       +---------------------------------------+    |
   |   |     |   |       | IAM Role                              |    |
   |   |     |   |       |---------------------------------------|    |
   |   |     |   |       | kptboard-ecs                          |    |
   |   |     |   |       | * AmazonEC2ContainerServiceRole       |----+
   |   |     |   |       |---------------------------------------|    |
   |   |     |   |       | kptboard-ec2                          |    |
   |   |     |   +-------| * AmazonEC2ContainerServiceforEC2Role |    |
   |   |     |           | * kptboard-ssm                        |    |
   |   |     |           +---------------------------------------+    |
   |   |     |                                                        |
   |   |   +----------------------+                                   |
   |   |   | ECR                  |                                   |
   |   |   |----------------------|                                   |
   |   |   | Repository           |                                   |
   |   |   | * kptboard           |                                   |
   |   |   +----------------------+                                   |
   |   |                                                              |
   |  +----------------------+                                        |
   |  | ECS                  |                                        |
   |  |----------------------|                                        |
   |  | Service              |                                        |
   |  | * kptboard           |----------------------------------------+
   |  |----------------------|
   |  | Task                 |
   |  | * kptboard           |
   |  | * kptboard-migration |
   |  +----------------------+
   |
  +----------------------------+
  | SSM Parameter Store        |
  |----------------------------|
  | * kptboard.database.url    |
  | * kptboard.secret.key.base |
  +----------------------------+
```
